define("mod_vpl/jstests-lazy",["exports","jquery","mod_vpl/vplutil"],(function(_exports,_jquery,_vplutil){var obj;
/**
   * VPL JavaScript test
   *
   * @copyright 2017 Juan Carlos Rodríguez-del-Pino
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.start=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var tests=[],result=[],testing="",nAsserts=0;function assert(b,message){nAsserts++,b||"string"==typeof message&&result.push("Error: "+message+" testing "+testing)}function assertEquals(a,b,message){nAsserts++,a!=b&&"string"==typeof message&&result.push("Error: "+message+" testing "+testing+'. Expected "'+a+'" found "'+b+'"')}tests.push({name:"VPLUtil",test:function(){var textArray,binaryArray,buffer,view;assert(_vplutil.VPLUtil.returnTrue(),"returnTrue"),assert(!_vplutil.VPLUtil.returnFalse(),"returnFalse"),function(){var rawData=new ArrayBuffer(13);assertEquals(13,rawData.byteLength,"rawData.byteLength");for(var bufferData=new Uint8Array(rawData),i=0;i<bufferData.length;i++)bufferData[i]=Math.round(255*Math.random());assertEquals(13,bufferData.length,"bufferData.length");var stringData="abcdeñhfjéÇ123143565387095609784",rawResult=_vplutil.VPLUtil.String2ArrayBuffer(stringData),stringResult=_vplutil.VPLUtil.ArrayBuffer2String(rawResult);assertEquals(stringData,stringResult,"ArrayBuffer2String"),stringResult=_vplutil.VPLUtil.ArrayBuffer2String(rawData),rawResult=_vplutil.VPLUtil.String2ArrayBuffer(stringResult);var bufferResult=new Uint8Array(rawResult);if(assertEquals(bufferData.length,bufferResult.length,"String2ArrayBuffer"),bufferData.length==bufferResult.length)for(var j=0;j<bufferData.length;j++)assertEquals(bufferData[j],bufferResult[j],"String2ArrayBuffer values")}(),assertEquals("c",_vplutil.VPLUtil.fileExtension("a.c"),"fileExtension"),assertEquals("C",_vplutil.VPLUtil.fileExtension("a.c.C"),"fileExtension"),assertEquals("hxx",_vplutil.VPLUtil.fileExtension("a.hxx"),"fileExtension"),assertEquals("all",_vplutil.VPLUtil.fileExtension(".all"),"fileExtension"),assert(!_vplutil.VPLUtil.isImage("a.c"),"isImage"),assert(_vplutil.VPLUtil.isImage("a.png"),"isImage"),assert(!_vplutil.VPLUtil.isBinary("a.c"),"isBinary"),assert(_vplutil.VPLUtil.isBinary("a.pdf"),"isBinary"),assert(_vplutil.VPLUtil.isBinary("a.png"),"isBinary"),assert(!_vplutil.VPLUtil.isBinary("test.unknown","int main() {\n    return 0;\n}"),"isBinary with text content"),assert(_vplutil.VPLUtil.isBinary("test.unknown","text\0binary"),"isBinary with null byte"),textArray=(new TextEncoder).encode("Hello World"),assert(!_vplutil.VPLUtil.isBinary("test.unknown",textArray),"isBinary with Uint8Array text"),binaryArray=new Uint8Array([0,1,2,3]),assert(_vplutil.VPLUtil.isBinary("test.unknown",binaryArray),"isBinary with Uint8Array binary"),buffer=new ArrayBuffer(4),(view=new Uint8Array(buffer))[0]=72,view[1]=105,view[2]=33,view[3]=10,assert(!_vplutil.VPLUtil.isBinary("test.unknown",buffer),"isBinary with ArrayBuffer text"),assert(_vplutil.VPLUtil.isBinary("test.unknown","Some textwith control chars"),"isBinary with control chars"),assert(_vplutil.VPLUtil.isBinary("test.pdf",void 0),"isBinary extension fallback"),assert(!_vplutil.VPLUtil.isBinary("test.txt",void 0),"isBinary extension fallback for text"),assert(!_vplutil.VPLUtil.isBlockly("a.c"),"isBlockly"),assert(_vplutil.VPLUtil.validFileName("a.c"),"validFileName")}}),tests.push({name:"VPLUtil langType",test:function(){var mapnames=_vplutil.VPLUtil.getLangNames();for(var ext in mapnames){var filename;"plain_text"!=ext&&(filename=ext.startsWith(".")?ext.substring(1):"filename."+ext,assert("plain_text"!=_vplutil.VPLUtil.langType(filename),"VPLUtil.langType"))}assert("plain_text"==_vplutil.VPLUtil.langType("otra_cosa"),"VPLUtil.langType")}});_exports.start=()=>{!function(){for(var i=0;i<tests.length;i++)try{testing=tests[i].name,tests[i].test()}catch(e){result.push("Error: Exception "+e.message+" testing "+testing+"\n"+e.stack)}}(),function(){var message,stat=nAsserts+" asserts tested";if(window.console.log(stat),(0,_jquery.default)("#test_results").append((0,_jquery.default)("<p></p>").text(stat)),message=0==result.length?"Test passed":result.length+" errors found",window.console.log(message),(0,_jquery.default)("#test_results").append((0,_jquery.default)("<p></p>").text(message)),result.length>0){for(var list=(0,_jquery.default)("<ol></ol>"),i=0;i<result.length;i++){window.console.log(i+1+": "+result[i]);var element=(0,_jquery.default)("<li></li>");element.text(result[i]),list.append(element)}(0,_jquery.default)("#test_results").append(list)}}()}}));

//# sourceMappingURL=jstests-lazy.min.js.map