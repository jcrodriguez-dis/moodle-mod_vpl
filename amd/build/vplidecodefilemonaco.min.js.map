{"version":3,"file":"vplidecodefilemonaco.min.js","sources":["../src/vplidecodefilemonaco.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Code files extension method using ACE editorfiles. Add to VPLFile object.\n *\n * @copyright 2013 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals requirejs */\nimport $ from 'jquery';\nimport {VPLUtil} from 'mod_vpl/vplutil';\nimport {VPLUI} from 'mod_vpl/vplui';\nimport console from 'core/log';\nimport url from 'core/url';\n\nexport const codeExtensionMonaco = function() {\n    var monaco = null;\n    var self = this;\n    var editor = null;\n    var opening = false;\n    var readOnly = self.getFileManager().readOnly;\n    var getOldContent = this.getContent;\n    //var lspWebsocket = null;\n    this.getContent = function() {\n        if (!this.isOpen()) {\n            return getOldContent.call(this);\n        }\n        return editor.getValue();\n    };\n    var setOldContent = this.setContent;\n    this.setContent = function(c) {\n        setOldContent.call(this, c);\n        if (this.isOpen()) {\n            editor.setValue(c);\n        }\n    };\n    var oldDestroy = this.destroy;\n    this.destroy = function() {\n        if (this.isOpen()) {\n            editor.dispose();\n        }\n        oldDestroy.call(this);\n    };\n    this.setFontSize = function(size) {\n        if (this.isOpen()) {\n            editor.updateOptions({fontSize: size});\n        }\n    };\n    var oldAdjustSize = this.adjustSize;\n    this.adjustSize = function() {\n        if (oldAdjustSize.call(this)) {\n            editor.layout();\n            return true;\n        }\n        return false;\n    };\n    this.gotoLine = function(line) {\n        if (!this.isOpen()) {\n            return;\n        }\n        var position = {lineNumber: line, column: 1};\n        editor.setPosition(position);\n        editor.revealPositionInCenter(position);\n        editor.focus();\n        this.updateStatus();\n    };\n    this.setReadOnly = function(s) {\n        readOnly = s;\n        if (this.isOpen()) {\n            editor.updateOptions({readOnly: s});\n        }\n    };\n    this.isReadOnly = function() {\n        return readOnly;\n    };\n    this.focus = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        var tid = this.getTId();\n        // Workaround to remove JQwery-UI background color.\n        $(tid).removeClass('ui-widget-content ui-tabs-panel');\n        editor.focus();\n        this.updateStatus();\n    };\n    this.blur = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.blur();\n    };\n    this.undo = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.trigger('keyboard', 'undo', null);\n        editor.focus();\n    };\n    this.redo = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.trigger('keyboard', 'redo', null);\n        editor.focus();\n    };\n    this.selectAll = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.trigger('keyboard', 'editor.action.selectAll', null);\n        editor.focus();\n    };\n    this.hasUndo = function() {\n        if (!this.isOpen()) {\n            return false;\n        }\n        var model = editor.getModel();\n        return model.canUndo && model.canUndo();\n    };\n    this.hasRedo = function() {\n        if (!this.isOpen()) {\n            return false;\n        }\n        var model = editor.getModel();\n        return model.canRedo && model.canRedo();\n    };\n    this.hasSelectAll = VPLUtil.returnTrue;\n    this.hasFind = VPLUtil.returnTrue;\n    this.hasFindReplace = VPLUtil.returnTrue;\n    this.hasNext = VPLUtil.returnTrue;\n    this.find = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        var action = editor.getAction('actions.find');\n        if (action) {\n            action.run();\n        }\n    };\n    this.replace = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.getAction('editor.action.replaceOne').run();\n    };\n    this.next = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        editor.getAction('editor.action.nextMatchFindAction').run();\n    };\n    this.getAnnotations = function() {\n        return [];\n    };\n    this.setAnnotations = function(a) {\n        if (!this.isOpen()) {\n            return false;\n        }\n        // Adapt to monaco markers\n        //{row:,column:,raw:,type:error,warning,info;text}\n        var markers = [];\n        for (var i = 0; i < a.length; i++) {\n            var ann = a[i];\n            var marker = {};\n            marker.severity = monaco.MarkerSeverity.Info;\n            if (ann.type === 'error') {\n                marker.severity = monaco.MarkerSeverity.Error;\n            } else if (ann.type === 'warning') {\n                marker.severity = monaco.MarkerSeverity.Warning;\n            }\n            marker.startLineNumber = ann.row;\n            marker.startColumn = ann.column;\n            marker.endLineNumber = ann.row;\n            marker.endColumn = ann.column + 10;\n            marker.message = ann.text;\n            markers.push(marker);\n        }\n        return monaco.editor.setModelMarkers(editor.getModel(), 'vpl-id', markers);\n    };\n\n    this.clearAnnotations = function() {\n        if (!this.isOpen()) {\n            return false;\n        }\n        return monaco.editor.setModelMarkers(editor.getModel(), 'vpl-id', []);\n    };\n\n    this.isLanguageLoaded = function(lang) {\n        if (monaco === null) {\n            return false;\n        }\n        var languages = monaco.languages.getLanguages();\n        for (var i = 0; i < languages.length; i++) {\n            if (languages[i].id === lang) {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.registerLanguage = async function(lang) {\n        if (monaco === null) {\n            return false;\n        }\n        if (!this.isLanguageLoaded(lang)) {\n            const moduleName = 'monaco-editor/esm/vs/basic-languages/'+ lang + '/' + lang + '.contribution';\n            return VPLUtil.loadModule(moduleName, 'vpl_monaco_lang_' + lang, false);\n        }\n        return true;\n    };\n    this.langSelection = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        var filenamepath = this.getFileName();\n        var lang = VPLUtil.langType(filenamepath);\n        var options = {\n            tabSize: 4,\n            insertSpaces: !VPLUtil.useHardTabs(filenamepath),\n        };\n        editor.updateOptions(options);\n        if (lang == \"plain_text\") {\n            lang = \"plaintext\";\n        }\n        if (lang == \"c_cpp\") {\n            lang = \"cpp\";\n        }\n        this.registerLanguage(lang).then(() => {\n            var uri = monaco.Uri.parse(\"file:///\" + filenamepath);\n            var model = monaco.editor.getModel(uri);\n            if (model) {\n                monaco.editor.setModelLanguage(model, lang);\n                model.setValue(self.getContent());\n            } else {\n                model = monaco.editor.createModel(\n                    self.getContent(),\n                    lang,\n                    uri\n                );\n            }\n            var oldModel = editor.getModel();\n            editor.setModel(model);\n            if (oldModel && oldModel !== model) {\n                oldModel.dispose();\n            }\n            this.setLang(lang);\n            editor.layout();\n            if (lang == 'java') {\n                VPLUtil.log('Java language selected - LSP not yet implemented');\n            }\n        }).catch((error) => {\n            console.error('Failed to load language ' + lang + ': ' + error);\n        });\n    };\n    this.getEditor = function() {\n        if (!this.isOpen()) {\n            return false;\n        }\n        return editor;\n    };\n    this.setTheme = function(theme) {\n        if (!this.isOpen()) {\n            return;\n        }\n        monaco.editor.setTheme(\"vs\" + (theme.includes('dark') ? '-dark' : ''));\n    };\n    this.updateStatus = function() {\n        if (!this.isOpen()) {\n            return;\n        }\n        var text = '';\n        var pos = editor.getPosition();\n        var fullname = this.getFileName();\n        var name = VPLUtil.getFileName(fullname);\n        if (fullname.length > 20 || name != fullname) {\n            text = fullname + ' ';\n        }\n        text += \"Ln \" + pos.lineNumber + ', Col ' + pos.column;\n        text += \" \" + VPLUtil.langName(name);\n        VPLUI.showIDEStatus(text);\n    };\n\n    this.open = function() {\n        var idefile = this;\n        idefile.showFileName();\n        if (idefile.isOpen()) {\n            return editor;\n        }\n        if (opening) {\n            return null;\n        }\n        opening = true;\n        this.getMonaco().then(function(monacoModule) {\n            opening = false;\n            monaco = monacoModule;\n            var fileManager = idefile.getFileManager();\n            var tid = idefile.getTId();\n            // Workaround to remove jquery-ui theme background color.\n            $(tid).removeClass('ui-widget-content ui-tabs-panel vpl_ide_file ui-corner-bottom');\n\n            monaco.createMonaco(document.getElementById(\"vpl_file\" + idefile.getId()), {\n                value: idefile.getContent(),\n                languageId: VPLUtil.langType(idefile.getFileName()),\n                fontSize: fileManager.getFontSize(),\n                readOnly: readOnly\n            }).then(function(monacoEditor) {\n                editor = monacoEditor.editor;\n                idefile.setTheme(fileManager.getTheme());\n                idefile.setOpen(true);\n                idefile.langSelection();\n                editor.onDidChangeCursorPosition(function() {\n                    idefile.updateStatus();\n                });\n                editor.onDidChangeModelContent(function() {\n                    if (!idefile.isModified()) {\n                        idefile.setModified();\n                    }\n                    idefile.updateStatus();\n                });\n            });\n        }).catch(function(error) {\n            opening = false;\n            console.error('Failed to load Monaco:' + error);\n            return false;\n        });\n    };\n    this.close = function() {\n        this.setOpen(false);\n        if (editor === null) {\n            return;\n        }\n        this.setContent(editor.getValue());\n        editor.dispose();\n        editor = null;\n    };\n    this.getMonaco = async function() {\n        return new Promise((resolve, reject) => {\n            try {\n                requirejs.config({\n                    paths: {\n                        'monaco-ls': url.relativeUrl('/mod/vpl/thirdpartylibs/monaco-ls')\n                    }\n                });\n                requirejs(['monaco-ls/monaco-bundle'], function(monacoModule) {\n                    VPLUtil.log('Monaco bundle loaded');\n                    window.monaco = monacoModule;\n                    resolve(monacoModule);\n                });\n            } catch (e) {\n                VPLUtil.log('Failed to load Monaco bundle:' + e);\n                reject(e);\n            }\n        });\n    };\n    this.getMonacoLoader = async function() {\n        return new Promise((resolve, reject) => {\n            try {\n                const base = url.relativeUrl('/mod/vpl/thirdpartylibs/monaco-editor/min/vs');\n                VPLUtil.loadScript([base + '/loader.js'], function() {\n                    requirejs.config({paths: {vs: base}});\n                    if (typeof window.MonacoEnvironment === 'undefined') {\n                        window.MonacoEnvironment = {\n                            getWorkerUrl: function(_moduleId, label) {\n                                    const workers = {\n                                        json:        base + 'language/json/json.worker.js',\n                                        css:         base + 'language/css/css.worker.js',\n                                        html:        base + 'language/html/html.worker.js',\n                                        typescript:  base + 'language/typescript/ts.worker.js',\n                                        javascript:  base + 'language/typescript/ts.worker.js',\n                                        editor:      base + 'editor/editor.worker.js',\n                                    };\n                                    return workers[label] || workers.editor;\n                                }\n                        };\n                    }\n                    require(['vs/editor/editor.main'], function() {\n                        console.debug('Monaco loaded');\n                        resolve(window.monaco);\n                    });\n                });\n            } catch (e) {\n                console.error('Failed to load Monaco:' + e);\n                reject(e);\n            }\n        });\n    };\n\n    this.getMonacoEms = async function() {\n        const variable = 'vpl_monaco';\n        const moduleName = 'monaco-editor/esm/vs/editor/editor.api';\n        const base = url.relativeUrl('/mod/vpl/thirdpartylibs/monaco-editor/esm/vs/');\n        if (typeof window[variable] !== 'undefined') {\n            return Promise.resolve(window[variable]);\n        }\n        if (typeof window.MonacoEnvironment === 'undefined') {\n            window.MonacoEnvironment = {\n                getWorkerUrl: function(_moduleId, label) {\n                        const workers = {\n                            json:        base + 'language/json/json.worker.js',\n                            css:         base + 'language/css/css.worker.js',\n                            html:        base + 'language/html/html.worker.js',\n                            typescript:  base + 'language/typescript/ts.worker.js',\n                            javascript:  base + 'language/typescript/ts.worker.js',\n                            editor:      base + 'editor/editor.worker.js',\n                        };\n                        return workers[label] || workers.editor;\n                    }\n            };\n        }\n        await VPLUtil.loadModule(moduleName, variable, false);\n        return Promise.resolve(window[variable]);\n    };\n};\n\n// End of code file"],"names":["monaco","self","this","editor","opening","readOnly","getFileManager","getOldContent","getContent","isOpen","getValue","call","setOldContent","setContent","c","setValue","oldDestroy","destroy","dispose","setFontSize","size","updateOptions","fontSize","oldAdjustSize","adjustSize","layout","gotoLine","line","position","lineNumber","column","setPosition","revealPositionInCenter","focus","updateStatus","setReadOnly","s","isReadOnly","tid","getTId","removeClass","blur","undo","trigger","redo","selectAll","hasUndo","model","getModel","canUndo","hasRedo","canRedo","hasSelectAll","VPLUtil","returnTrue","hasFind","hasFindReplace","hasNext","find","action","getAction","run","replace","next","getAnnotations","setAnnotations","a","markers","i","length","ann","marker","severity","MarkerSeverity","Info","type","Error","Warning","startLineNumber","row","startColumn","endLineNumber","endColumn","message","text","push","setModelMarkers","clearAnnotations","isLanguageLoaded","lang","languages","getLanguages","id","registerLanguage","async","moduleName","loadModule","langSelection","filenamepath","getFileName","langType","options","tabSize","insertSpaces","useHardTabs","then","uri","Uri","parse","setModelLanguage","createModel","oldModel","setModel","setLang","log","catch","error","getEditor","setTheme","theme","includes","pos","getPosition","fullname","name","langName","showIDEStatus","open","idefile","showFileName","getMonaco","monacoModule","fileManager","createMonaco","document","getElementById","getId","value","languageId","getFontSize","monacoEditor","getTheme","setOpen","onDidChangeCursorPosition","onDidChangeModelContent","isModified","setModified","close","Promise","resolve","reject","requirejs","config","paths","url","relativeUrl","window","e","getMonacoLoader","base","loadScript","vs","MonacoEnvironment","getWorkerUrl","_moduleId","label","workers","json","css","html","typescript","javascript","require","debug","getMonacoEms"],"mappings":"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"}