{"version":3,"file":"vplui.min.js","sources":["../src/vplui.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tools for the VPL IDE\n *\n * @copyright 2016 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals JUnzip */\n/* globals JSInflate */\n\ndefine(\n    [\n        'jquery',\n        'jqueryui',\n        'mod_vpl/vplutil',\n    ],\n    function($, jqui, VPLUtil) {\n        var VPLUI = {};\n        // Get scrollBarWidth.\n        VPLUI.scrollBarWidth = function() {\n            var parent, child, width;\n            parent = $('<div style=\"width:50px;height:50px;overflow:auto\"><div/></div>').appendTo('body');\n            child = parent.children();\n            width = child.innerWidth() - child.height(99).innerWidth();\n            parent.remove();\n            return width;\n        };\n        VPLUI.readZipFile = function(data, save, progressBar, end) {\n            if (!end) {\n                end = VPLUtil.doNothing;\n            }\n            if (typeof JUnzip == 'undefined') {\n                VPLUtil.loadScript(['/zip/inflate.js', '/zip/unzip.js']\n                , function() {\n                    VPLUI.readZipFile(data, save, progressBar, end);\n                });\n                return;\n            }\n            var ab = VPLUtil.ArrayBuffer2String(data);\n            var unzipper = new JUnzip(ab);\n            if (!unzipper.isZipFile()) {\n                VPLUtil.log('Not a ZIP file');\n                end();\n                return;\n            }\n            unzipper.readEntries();\n            var out = unzipper.entries.length;\n            /**\n             * Process each entry in the zip file.\n             * Recursive process.\n             * @param {int} i Entry to process.\n             */\n            function process(i) {\n                if (i >= out || progressBar.isClosed()) {\n                    end();\n                    return;\n                }\n                var entry = unzipper.entries[i];\n                var fileName = entry.fileName;\n                var data;\n                // Is directory entry then skip.\n                if (fileName.match(/\\/$/)) {\n                    process(i + 1);\n                } else {\n                    progressBar.processFile(fileName);\n                    var uncompressed = '';\n                    if (entry.compressionMethod === 0) {\n                        // Plain file.\n                        uncompressed = entry.data;\n                    } else if (entry.compressionMethod === 8) {\n                        uncompressed = JSInflate.inflate(entry.data);\n                    }\n                    if (VPLUtil.isBinary(fileName, uncompressed)) {\n                        // If binary use as arrayBuffer.\n                        save({name: fileName, contents: btoa(uncompressed), encoding: 1});\n                        // TODO Show message when error.\n                        process(i + 1);\n                    } else {\n                        data = VPLUtil.String2ArrayBuffer(uncompressed);\n                        var blob = new Blob([data], {\n                            type: 'text/plain'\n                        });\n                        var fr = new FileReader();\n                        fr.onload = function(e) {\n                            save({name: fileName, contents: e.target.result, encoding: 0});\n                            process(i + 1);\n                        };\n                        fr.onerror = function(e) {\n                            VPLUtil.log(e);\n                            i = out;\n                            process(i + 1);\n                            // TODO Show message when error.\n                        };\n                        fr.readAsText(blob);\n                    }\n                }\n            }\n            process(0);\n        };\n\n        VPLUI.readSelectedFiles = function(filesToRead, save, end) {\n            // Process all File objects.\n            var pb = new VPLUI.progressBar('import', 'import');\n            var errorsMessages = '';\n            if (!end) {\n                end = VPLUtil.doNothing;\n            }\n            pb.processFile = function(name) {\n                pb.setLabel(name);\n            };\n            /**\n             * Read each file in filesToReas\n             * Recursive process.\n             * @param {int} sec secuencial file to read\n             */\n            function readSecuencial(sec) {\n                if (sec >= filesToRead.length || pb.isClosed()) {\n                    end();\n                    pb.close();\n                    if (errorsMessages > '') {\n                        VPLUI.showErrorMessage(errorsMessages);\n                    }\n                    return;\n                }\n                var f = filesToRead[sec];\n                pb.processFile(f.name);\n                var reader = new FileReader();\n                reader.onload = function(e) {\n                    var arrayBuffer = e.target.result;\n                    if (VPLUtil.isBinary(f.name, arrayBuffer)) {\n                        if (VPLUtil.fileExtension(f.name).toLowerCase() === 'zip') {\n                            try {\n                                VPLUI.readZipFile(arrayBuffer, save, pb, function() {\n                                                                                  readSecuencial(sec + 1);\n                                                                               });\n                                return;\n                            } catch (ex) {\n                                VPLUI.showErrorMessage(ex + \" : \" + f.name);\n                            }\n                        } else {\n                            var binaryString = VPLUtil.ArrayBuffer2String(arrayBuffer);\n                            save({name: f.name, contents: btoa(decodeURIComponent(encodeURIComponent(binaryString))), encoding: 1});\n                        }\n                    } else {\n                        save({name: f.name, contents: (new TextDecoder(\"utf-8\")).decode(arrayBuffer), encoding: 0});\n                    }\n                    readSecuencial(sec + 1);\n                };\n                reader.onerror = function(e) {\n                    errorsMessages += \"Error \\\"\" + e.target.error + \"\\\" reading \" + f.name + \"\\n\";\n                    readSecuencial(sec + 1);\n                };\n                reader.readAsArrayBuffer(f);\n            }\n            readSecuencial(0);\n        };\n        VPLUI.dialogbaseOptions = {\n            minWidth: 200,\n            autoOpen: false,\n            width: 'auto',\n            closeText: VPLUtil.str('cancel'),\n            modal: true,\n            dialogClass: 'vpl_ide vpl_ide_dialog'\n        };\n        VPLUI.iconModified = function() {\n            var html = '<span title=\"' + VPLUtil.str('modified') + '\" class=\"vpl_ide_charicon\">';\n            html += '<i class=\"fa fa-star\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUI.iconDelete = function() {\n            var html = ' <span title=\"' + VPLUtil.str('delete') + '\" class=\"vpl_ide_charicon vpl_ide_delicon\">';\n            html += '<i class=\"fa fa-trash\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUI.iconClose = function() {\n            var html = ' <span title=\"' + VPLUtil.str('closebuttontitle');\n            html += '\" class=\"vpl_ide_charicon vpl_ide_closeicon\">' + '<i class=\"fa fa-remove\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUI.iconRequired = function() {\n            var html = ' <span title=\"' + VPLUtil.str('required') + '\" class=\"vpl_ide_charicon\">';\n            html += '<i class=\"fa fa-shield\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUI.iconReadOnly = function() {\n            var html = ' <span title=\"' + VPLUtil.str('readOnly') + '\" class=\"vpl_ide_charicon\">';\n            html += '<i class=\"fa fa-lock\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUI.iconFolder = function() {\n            return '<i class=\"fa fa-folder-open-o\"></i>';\n        };\n        (function() {\n            var menuIcons = {\n                'filelist': 'folder-open-o',\n                'filelistclose': 'folder-o',\n                'new': 'file-code-o',\n                'rename': 'pencil',\n                'delete': 'trash',\n                'multidelete': 'trash|list',\n                'showparentfiles': 'eye|files-o',\n                'close': 'remove',\n                'comments': 'commenting',\n                'import': 'upload',\n                'print': 'print',\n                'edit': 'edit',\n                'undo': 'undo',\n                'redo': 'repeat',\n                'select_all': 'location-arrow',\n                'find': 'search',\n                'find_replace': 'exchange',\n                'next': 'search-plus',\n                'resetfiles': 'refresh',\n                'download': 'download',\n                'fullscreen': 'expand',\n                'regularscreen': 'compress',\n                'save': 'save',\n                'shortcuts': 'flash',\n                'sort': 'list-ol',\n                'run': 'rocket',\n                'running': 'rocket fa-spin',\n                'debug': 'bug',\n                'evaluate': 'check-square-o',\n                'console': 'terminal',\n                'about': 'question',\n                'info': 'info-circle',\n                'alert': 'warning',\n                'trash': 'trash',\n                'retrieve': 'download',\n                'spinner': 'refresh fa-spin',\n                'keyboard': 'keyboard-o',\n                'clipboard': 'clipboard',\n                'timeleft': 'clock-o',\n                'copy': 'copy',\n                'paste': 'paste',\n                'more': 'plus-square',\n                'less': 'minus-square',\n                'resize': 'arrows-alt',\n                'graphic': 'picture-o',\n                'send': 'send',\n                'theme':  'paint-brush',\n                'user': 'user',\n                'fontsize': 'text-height',\n                'close-rightpanel': 'caret-square-o-right',\n                'open-rightpanel': 'caret-square-o-left'\n            };\n            VPLUI.genIcon = function(icon, size) {\n                if (!menuIcons[icon]) {\n                    return '';\n                }\n                var classes = 'fa fa-';\n                if (!size) {\n                    classes += 'lg';\n                } else {\n                    classes += size;\n                }\n                var icons = menuIcons[icon].split('|');\n                var ret = '';\n                for (var i = 0; i < icons.length; i++) {\n                    ret += \"<i class='\" + classes + ' fa-' + icons[i] + \"'></i>\";\n                }\n                return ret;\n            };\n        })();\n        // UI operations.\n        VPLUI.setTitleBar = function(dialog, type, icon, buttons, handler) {\n            var title = $(dialog).parent().find(\"span.ui-dialog-title\");\n            /**\n             * Generate HTML for a button with icon\n             * @param {string} e name of botton.\n             * @returns {string} Html tag <a> as a button.\n             */\n            function genButton(e) {\n                var html = \"<a id='vpl_\" + type + \"_\" + e + \"' href='#' title='\" + VPLUtil.str(e) + \"'>\";\n                html += VPLUI.genIcon(e, 'fw') + \"</a>\";\n                return html;\n            }\n            var html = VPLUI.genIcon(icon);\n            html += \" <span class='\" + type + \"-title-buttons'></span>\";\n            html += \"<span class='\" + type + \"-title-text'></span>\";\n            title.html(html);\n            var titleButtons = title.find(\"span.\" + type + \"-title-buttons\");\n            var titleText = title.find(\"span.\" + type + \"-title-text\");\n            html = \"\";\n            for (var i = 0; i < buttons.length; i++) {\n                html += genButton(buttons[i]);\n            }\n            titleButtons.html(html);\n            for (var ih = 0; ih < handler.length; ih++) {\n                var button = title.find('#vpl_' + type + '_' + buttons[ih]);\n                button.button().click(handler[ih]);\n                button.css('padding', '1px 3px');\n            }\n            titleButtons.on('focus', '*', function() {\n                                              $(this).blur();\n                                          });\n            return titleText;\n        };\n        VPLUI.setDialogTitleIcon = function(dialog, icon) {\n            var title = $(dialog).parent().find(\"span.ui-dialog-title\");\n            title.html(VPLUI.genIcon(icon) + ' ' + title.html());\n        };\n        VPLUI.progressBar = function(title, message, onUserClose) {\n            var labelHTML = '<span class=\"vpl_ide_progressbarlabel\"></span>';\n            var sppiner = '<div class=\"vpl_ide_progressbaricon\">' + VPLUI.genIcon('spinner') + '</div>';\n            var pbHTML = ' <div class=\"vpl_ide_progressbar\">' + sppiner + labelHTML + '</div>';\n            var HTML = '<div class=\"vpl_ide_dialog\" style=\"display:none;\">' + pbHTML + '</div>';\n            var dialog = $(HTML);\n            $('body').append(dialog);\n            var progressbar = dialog.find('.vpl_ide_progressbar');\n            var label = progressbar.find('.vpl_ide_progressbarlabel');\n            dialog.dialog({\n                'title': VPLUtil.str(title),\n                resizable: false,\n                autoOpen: false,\n                width: 200,\n                height: 20,\n                minHeight: 20,\n                modal: true,\n                dialogClass: 'vpl_ide vpl_ide_dialog',\n                close: function(event) {\n                    if (dialog) {\n                        if (onUserClose && event.originalEvent) {\n                            onUserClose();\n                        }\n                        onUserClose = false;\n                    }\n                }\n            });\n            this.setLabel = function(t, icon) {\n                if (dialog) {\n                    label.text(t);\n                    if (icon) {\n                        label.html(VPLUI.genIcon(icon) + ' ' + label.html());\n                    }\n                }\n            };\n            this.close = function() {\n                if (dialog) {\n                    dialog.dialog('destroy');\n                    $(dialog).remove();\n                    dialog = false;\n                }\n            };\n            this.isClosed = function() {\n                return dialog === false;\n            };\n            var titleTag = dialog.siblings().find('.ui-dialog-title');\n            titleTag.html(VPLUI.genIcon(title) + ' ' + titleTag.html());\n            this.setLabel(VPLUtil.str(message));\n            dialog.dialog('open');\n            dialog.dialog('option', 'height', 'auto');\n        };\n        /**\n         * Shows a dialog with a message.\n         * @param {string} message\n         * @param {Object} initialoptions icon, title, actions handler (ok, yes, no, close)\n         * @returns {JQuery} JQueryUI Dialog object already open\n         */\n        VPLUI.showMessage = function(message, initialoptions) {\n            var options = $.extend({}, VPLUI.dialogbaseOptions, initialoptions);\n            var messageDialog = $('<div class=\"vpl_ide_dialog\" style=\"display:none\"></div>');\n            var icon = '';\n            var contents = ' <span class=\"dmessage\">' + message.replace(/\\n/g, '<br>') + '</span>';\n            messageDialog.html(contents);\n            if (typeof options.icon == 'undefined') {\n                icon = 'info';\n            } else {\n                icon = options.icon;\n                delete options.icon;\n            }\n            if (!options.title) {\n                options.title = VPLUtil.str('warning');\n            }\n            $('body').append(messageDialog);\n            var messageButtons = {};\n            if (typeof initialoptions.ok == 'function') {\n                messageButtons[VPLUtil.str('ok')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.ok();\n                };\n                messageButtons[VPLUtil.str('cancel')] = function() {\n                    $(this).dialog('close');\n                };\n                delete options.ok;\n            } else if (typeof initialoptions.yes == 'function') {\n                messageButtons[VPLUtil.str('yes')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.yes();\n                };\n                messageButtons[VPLUtil.str('no')] = function() {\n                    $(this).dialog('close');\n                };\n                delete options.yes;\n            } else {\n                messageButtons[VPLUtil.str('close')] = function() {\n                    $(this).dialog('close');\n                };\n            }\n            if (options.next) {\n                messageButtons[VPLUtil.str('next')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.next();\n                };\n            }\n            options.close = function() {\n                    $(this).remove();\n                    if (initialoptions.close) {\n                        initialoptions.close();\n                    }\n            };\n            options.buttons = messageButtons;\n\n            messageDialog.dialog(options);\n            var titleTag = messageDialog.siblings().find('.ui-dialog-title');\n            titleTag.html(VPLUI.genIcon(icon) + ' ' + titleTag.html());\n\n            messageDialog.setMessage = function(men) {\n                $(messageDialog).find('.dmessage').html(men.replace(/\\n/g, '<br>'));\n            };\n\n            messageDialog.dialog('open');\n            return messageDialog;\n        };\n        VPLUI.showErrorMessage = function(message, options) {\n            var currentOptions = $.extend({}, VPLUI.dialogbaseOptions, {\n                title: VPLUtil.str('error'),\n                icon: 'alert'\n            });\n            if (options) {\n                currentOptions = $.extend(currentOptions, options);\n            }\n            return VPLUI.showMessage(message, currentOptions);\n        };\n        /**\n         * Request an action to de server: save, run, debug, evaluate, update, getresult, etc.\n         * @param {string} action Name of action to request.\n         * @param {string} title The title that shows the progress dialog\n         * @param {object} data Data to send to the server\n         * @param {string} URL URL to the server entry point, lacking action\n         * @param {boolean} noDialog If true then no dialog is shown\n         * @returns {deferred} Defferred object\n         */\n        VPLUI.requestAction = function(action, title, data, URL, noDialog) {\n            var deferred = $.Deferred();\n            var request = null;\n            var xhr = false;\n            var apb = false;\n            if (!noDialog) {\n                if (title === '') {\n                    title = 'connecting';\n                }\n                apb = new VPLUI.progressBar(action, title, function() {\n                    if (request.readyState != 4) {\n                        if (xhr && xhr.abort) {\n                            xhr.abort();\n                        }\n                    }\n                });\n            }\n            request = $.ajax({\n                beforeSend: function(jqXHR) {\n                    xhr = jqXHR;\n                    return true;\n                },\n                async: true,\n                type: \"POST\",\n                url: URL + action,\n                'data': JSON.stringify(data),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\"\n            }).always(function() {\n                if (!noDialog) {\n                    apb.close();\n                }\n            }).done(function(response) {\n                if (!response.success) {\n                    deferred.reject(response.error);\n                } else {\n                    deferred.resolve(response.response);\n                }\n            }).fail(function(jqXHR, textStatus, errorThrown) {\n                var message = VPLUtil.str('connection_fail') + ': ' + textStatus;\n                if (window.VPLDebugMode && errorThrown.message != undefined) {\n                    message += ': ' + errorThrown.message;\n                }\n                VPLUtil.log(message);\n                deferred.reject(message);\n            });\n            return deferred;\n        };\n        VPLUI.clickServer = function(e) {\n            var w = 550;\n            var h = 450;\n            var left = (screen.width / 2) - (w / 2);\n            var top = (screen.height / 2) - (h / 2);\n            try {\n                var features = 'toolbar=no, location=no, directories=no, status=no, menubar=no';\n                features += ', resizable=yes, scrollbars=yes, copyhistory=no, width=' + w;\n                features += ', height=' + h + ', top=' + top + ', left=' + left;\n                var win = window.open($(this).attr('href'), '_blank', features);\n                if (!win) {\n                    return true;\n                }\n            } catch (ex) {\n                VPLUtil.log(ex);\n                return true;\n            }\n            e.preventDefault();\n            $(this).parent().hide();\n            return false;\n        };\n\n        VPLUI.acceptCertificates = function(servers, getLastAction) {\n            if (servers.length > 0) {\n                // Generate links dialog.\n                var html = VPLUtil.str('acceptcertificatesnote');\n                html += '<ol>';\n                var i;\n                for (i in servers) {\n                    if (servers.hasOwnProperty(i)) {\n                        var n = 1 + i;\n                        html += '<li><a href=\"' + servers[i] + '\" target=\"_blank\">Server ';\n                        html += n + '</a></li>';\n                    }\n                }\n                html += '</ol>';\n                var m = VPLUI.showMessage(html, {\n                    ok: function() {\n                        var action = getLastAction();\n                        if (action) {\n                            action();\n                        }\n                    },\n                    icon: 'unlocked',\n                    title: VPLUtil.str('acceptcertificates')\n                });\n                $(m).find('a').on('click keypress', VPLUI.clickServer);\n            } else {\n                VPLUtil.log('servers.length == 0');\n                VPLUI.showErrorMessage(VPLUtil.str('connection_fail'));\n            }\n        };\n        VPLUI.monitorRunning = VPLUtil.returnFalse;\n        VPLUI.webSocketMonitor = function(coninfo, title, running, externalActions) {\n            VPLUtil.setProtocol(coninfo);\n            VPLUtil.setProcessId(coninfo.processid);\n            var ws = null;\n            var pb = null;\n            var deferred = $.Deferred();\n            var defail = function(m) {\n                deferred.reject(m);\n                if (ws !== null) {\n                    ws.close();\n                }\n            };\n            var delegated = false;\n            var messageActions = {\n                'message': function(content) {\n                    var parsed = /^([^:]*):?([^]*)/.exec(content);\n                    var state = VPLUtil.sanitizeText(parsed[1]);\n                    var detail = VPLUtil.sanitizeText(parsed[2]);\n                    if (state == 'running') {\n                        state = running;\n                    }\n                    var text = VPLUtil.str(state);\n                    if (detail > '') {\n                        text += ': ' + detail;\n                    }\n                    if (pb !== null && !pb.isClosed()) {\n                        pb.setLabel(text);\n                    } else if (externalActions.getConsole && externalActions.getConsole().isOpen()) {\n                        externalActions.getConsole().setMessage(text);\n                    } else {\n                        VPLUtil.log('Error: no dialogo. Message not shown: ' + text);\n                    }\n                },\n                'compilation': function(content) {\n                    if (externalActions.setResult) {\n                        externalActions.setResult({\n                            'compilation': content,\n                        }, false);\n                    }\n                },\n                'retrieve': function() {\n                    var data = {\"processid\": coninfo.processid};\n                    pb.close();\n                    delegated = true;\n                    VPLUI.requestAction('retrieve', '', data, externalActions.ajaxurl)\n                    .done(\n                        function(response) {\n                            deferred.resolve();\n                            if (externalActions.setResult) {\n                                externalActions.setResult(response, true);\n                            }\n                        }\n                   ).fail(defail);\n                },\n                'run': function(content) {\n                    pb.close();\n                    externalActions.run(content, coninfo, ws);\n                },\n                'close': function() {\n                    VPLUtil.log('ws close message from jail');\n                    ws.close();\n                    var data = {\"processid\": coninfo.processid};\n                    VPLUI.requestAction('cancel', '', data, externalActions.ajaxurl, true);\n                }\n            };\n            try {\n                if (VPLUtil.supportWebSocket()) {\n                    ws = new WebSocket(coninfo.monitorURL);\n                } else {\n                    VPLUtil.log('ws not available');\n                    deferred.reject(VPLUtil.str('browserupdate'));\n                    return deferred;\n                }\n            } catch (e) {\n                VPLUtil.log('ws new say ' + e);\n                deferred.reject(e.message);\n                return deferred;\n            }\n            pb = new VPLUI.progressBar(title, 'connecting', function() {\n                deferred.reject('Stopped by user');\n                ws.close();\n            });\n            ws.notOpen = true;\n            ws.onopen = function() {\n                ws.notOpen = false;\n                pb.setLabel(VPLUtil.str('connected'));\n                if (externalActions.open) {\n                    externalActions.open();\n                }\n            };\n            ws.onerror = function(event) {\n                VPLUtil.log('ws error ' + event);\n                pb.close();\n                if (coninfo.secure && ws.notOpen) {\n                    VPLUI.requestAction('getjails', 'retrieve', {}, externalActions.ajaxurl)\n                    .done(function(response) {\n                        VPLUI.acceptCertificates(response.servers, function() {\n                            return externalActions.getLastAction();\n                        });\n                    })\n                    .fail(defail);\n                } else {\n                    deferred.reject(VPLUtil.str('connection_fail'));\n                }\n                if (externalActions.close) {\n                    VPLUtil.delay('externalActions.close', externalActions.close);\n                }\n            };\n            ws.onclose = function() {\n                if (externalActions.getConsole) {\n                    externalActions.getConsole().disconnect();\n                }\n                if (!ws.notOpen) {\n                    pb.close();\n                    if (!delegated && deferred.state() != 'rejected') {\n                        deferred.resolve();\n                    }\n                }\n                if (externalActions.close) {\n                    externalActions.close();\n                }\n            };\n\n            ws.onmessage = function(event) {\n                var message = /^([^:]+):([^]*)/.exec(event.data);\n                if (message !== null) {\n                    var action = message[1];\n                    var content = message[2];\n                    if (messageActions[action]) {\n                        messageActions[action](content);\n                    }\n                } else {\n                    pb.setLabel(VPLUtil.str('error') + ': ' + event.data);\n                }\n            };\n            VPLUI.monitorRunning = function() {\n                return ws !== null && ws.readyState != WebSocket.CLOSED;\n            };\n            return deferred;\n        };\n\n        VPLUI.hideIDEStatus = function() {\n            VPLUtil.delay('updateIDEStatus', function() {\n                $('.vpl_ide_status').hide();\n            });\n        };\n\n        VPLUI.showIDEStatus = function(status) {\n            VPLUtil.delay('updateIDEStatus', function() {\n                $('.vpl_ide_status').text(status);\n                $('.vpl_ide_status').show();\n            });\n        };\n\n        VPLUtil.init = VPLUtil.doNothing;\n        // Needs global use of VPLUtil for view source? Review.\n        window.VPLUI = VPLUI;\n        return VPLUI;\n    }\n);\n"],"names":["define","$","jqui","VPLUtil","menuIcons","VPLUI","scrollBarWidth","parent","child","width","appendTo","children","innerWidth","height","remove","readZipFile","data","save","progressBar","end","doNothing","JUnzip","ab","ArrayBuffer2String","unzipper","isZipFile","log","readEntries","out","entries","length","process","i","isClosed","entry","fileName","match","processFile","uncompressed","compressionMethod","JSInflate","inflate","isBinary","name","contents","btoa","encoding","String2ArrayBuffer","blob","Blob","type","fr","FileReader","onload","e","target","result","onerror","readAsText","loadScript","readSelectedFiles","filesToRead","pb","errorsMessages","setLabel","readSecuencial","sec","close","showErrorMessage","f","reader","arrayBuffer","fileExtension","toLowerCase","ex","binaryString","decodeURIComponent","encodeURIComponent","TextDecoder","decode","error","readAsArrayBuffer","dialogbaseOptions","minWidth","autoOpen","closeText","str","modal","dialogClass","iconModified","html","iconDelete","iconClose","iconRequired","iconReadOnly","iconFolder","filelist","filelistclose","new","rename","delete","multidelete","showparentfiles","comments","import","print","edit","undo","redo","select_all","find","find_replace","next","resetfiles","download","fullscreen","regularscreen","shortcuts","sort","run","running","debug","evaluate","console","about","info","alert","trash","retrieve","spinner","keyboard","clipboard","timeleft","copy","paste","more","less","resize","graphic","send","theme","user","fontsize","genIcon","icon","size","classes","icons","split","ret","setTitleBar","dialog","buttons","handler","title","genButton","titleButtons","titleText","ih","button","click","css","on","this","blur","setDialogTitleIcon","message","onUserClose","sppiner","append","label","resizable","minHeight","event","originalEvent","t","text","titleTag","siblings","showMessage","initialoptions","options","extend","messageDialog","replace","messageButtons","ok","yes","setMessage","men","currentOptions","requestAction","action","URL","noDialog","deferred","Deferred","request","xhr","apb","readyState","abort","ajax","beforeSend","jqXHR","async","url","JSON","stringify","contentType","dataType","always","done","response","success","resolve","reject","fail","textStatus","errorThrown","window","VPLDebugMode","undefined","clickServer","left","screen","w","top","h","features","open","attr","preventDefault","hide","acceptCertificates","servers","getLastAction","hasOwnProperty","n","m","monitorRunning","returnFalse","webSocketMonitor","coninfo","externalActions","setProtocol","setProcessId","processid","ws","defail","delegated","messageActions","content","parsed","exec","state","sanitizeText","detail","getConsole","isOpen","compilation","setResult","ajaxurl","supportWebSocket","WebSocket","monitorURL","notOpen","onopen","secure","delay","onclose","disconnect","onmessage","CLOSED","hideIDEStatus","showIDEStatus","status","show","init"],"mappings":"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"}