/**
 * Binary files extension methods. Add to VPLFile object.
 *
 * @copyright 2013 Juan Carlos Rodríguez-del-Pino
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>
 */
define("mod_vpl/vplidebinaryfile",["jquery","mod_vpl/vplutil"],(function($,VPLUtil){return function(){this.isBinary=function(){return!0};var setOldContent=this.setContent;this.setContent=function(c){setOldContent.call(this,c),this.setModified(),this.updateDataURL()},this.updateDataURL=function(){var fileName=this.getFileName(),value=this.getContent(),tid=this.getTId();if(VPLUtil.isImage(fileName)){var prevalue="data:"+VPLUtil.getMIME(fileName)+";base64,";$(tid).find("img").attr("src",prevalue+value)}else $(tid).find("img").attr("src","")},this.adjustSize=function(){if(!this.isOpen())return!1;var editTag=$(this.getTId());if(0===editTag.length)return!1;var newHeight=editTag.parent().height();return(newHeight-=editTag.position().top)!=editTag.height()&&(editTag.height(newHeight),!0)},this.open=function(){this.showFileName();var fileName=this.getFileName(),tid=this.getTId();this.setOpen(!0),VPLUtil.isImage(fileName)?($(tid).addClass("vpl_ide_img").append("<img />"),this.updateDataURL()):$(tid).addClass("vpl_ide_binary").text(VPLUtil.str("binaryfile"))},this.close=function(){this.setOpen(!1)},this.langSelection=function(){this.setLang("Binary")}}}));

//# sourceMappingURL=vplidebinaryfile.min.js.map